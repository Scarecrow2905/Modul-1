<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nettbutikk</title>
    <link rel="stylesheet" href="style.css">
    <script src=""></script>
</head>
<body>
    <div id="app"></div>

    <script>

        // Model 

        let html = '';

        const model = {

            activepage: 'shop',
            inventory: '',

            totalprice: 0,
            shoppingCart: [],
            numberOfItems: 0,

            product: [
                {
                    name: "RTX 3060",
                    price: 4000,
                    inStock: 3,
                },
                {
                    name: "RTX 3070",
                    price: 5000,
                    inStock: 2,
                },
                {
                    name: "RTX 3080",
                    price: 7000,
                    inStock: 4,
                },
                {
                    name: "RTX 3090",
                    price: 9000,
                    inStock: 6,
                },
            ]
        }

        // View 
        showStore();
        function showStore(){
            var result = '';
        for (let i = 0; i < model.product.length; i++) {
            const gpu = model.product[i].name;
            const price = model.product[i].price;
            const stock = model.product[i].inStock;
            result += `
            <div>GPU: ${gpu} ${price}kr ${stock}.stk <button type="button" onclick="addToCart(${i})">Add to cart</button></div>`;
        }
        

        

        document.getElementById('app').innerHTML = `

        <header class="main-header">
            <nav class="nav main-nav">
                <ul>
                    <li><a href="home.html">HOME</a></li>
                    <li><a href="store.html">STORE</a></li>
                    <li><a href="about.html">ABOUT</a></li>
                </ul>
            </nav>
            <h1 class="gpuShop">The GPU Shop</h1>
        </header>

        <h2 class="cards">Cards</h2>
        
        <div class="store">
            <span class="name-item type-name">${result}</span>
        </div>
            
        <h2 class="cart">CART</h2>
        <div>${model.totalprice} kr </div>
        <button class="purchase" type="button" onclick="purchase()">Purchase</button>

        <footer class="main-footer">
            <div class="container main-footer-container">
                <ul class="nav footer-nav">

                    <li>
                        <a href="https://www.youtube.com" target="_blank">
                        <img src=""> Youtube
                        </a>
    
                        <a href="https://www.facebook.com" target="_blank"> Facebook
                        </a>
                    </li>
    
                </div>
        </footer>
        `};

        // Controller
        function addToCart(index){
            if (model.product[index].inStock == 0) alert('Not in storage');
            else {
                model.product[index].inStock --;
                model.numberOfItems ++;
                model.totalprice += model.product[index].price;
                model.shoppingCart.push(model.product[index].name)
            }
            showStore();
        }

        function purchase(index){
            if (model.shoppingCart[index] === 0) alert('Nothing in cart');
            else {
                alert('Purchase complete!')
            }
        }
        

    </script>
</body>
</html>